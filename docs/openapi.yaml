openapi: 3.0.3

info:
  title: Sahal Service Staff Offer API Documentation
  version: 1.0.0
  description: |
    REST API for partner companies to verify employees 
    and save SomGas loan adjustments.

servers:
  - url: https://api.domain.com

security:
  - ApiKeyAuth: []

paths:

  /api/v1/employees/status:
    post:
      summary: Check Employee Status
      description: Checks whether an employee exists and returns their current status.
      operationId: checkEmployeeStatus
      tags:
        - Employees
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - mobile
              properties:
                mobile:
                  type: string
                  description: Local number without '+' and country code
                  example: "617953152"
      responses:
        "200":
          description: Successful response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/StandardSuccessResponse"
              example:
                ResultCode: 0
                Language: 0
                ReplyMessage: Success
                data:
                  - Status: Normal
                    EmpId: SH87991
                    Name: Mohamed Mahad Farah

        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
        "429":
          $ref: "#/components/responses/RateLimited"

  /api/v1/employees/debts/confirm:
    post:
      summary: Save SomGas Loan / Adjustment
      description: Creates an adjustment record for an employee.
      operationId: saveSomgasLoanAdjustment
      tags:
        - Adjustments
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - Amount
                - Tell
                - ActionDate
                - OrderId
                - Isconfirmed
              properties:
                Amount:
                  type: number
                  format: double
                  description: Positive amount only
                  example: 0.30
                Tell:
                  type: string
                  description: Local phone number without '+' and country code
                  example: "617953152"
                ActionDate:
                  type: string
                  format: date
                  example: "2026-02-01"
                OrderId:
                  type: string
                  description: Unique request reference
                  example: "345402532"
                Isconfirmed:
                  description: 1 = confirmed, 0 = pending
                  oneOf:
                    - type: integer
                      enum: [0, 1]
                    - type: string
                      enum: ["0", "1"]
                  example: 1
      responses:
        "200":
          description: Successful response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/StandardSuccessResponse"
              example:
                ResultCode: 0
                Language: 0
                ReplyMessage: Success
                data:
                  - Status: Normal
                    EmpId: SH87991
                    Name: Mohamed Mahad Farah

        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
        "409":
          description: Business rule violation
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "429":
          $ref: "#/components/responses/RateLimited"

components:

  securitySchemes:
    ApiKeyAuth:
      type: apiKey
      in: header
      name: Authorization

  schemas:

    StandardSuccessResponse:
      type: object
      properties:
        ResultCode:
          type: integer
          example: 0
        Language:
          type: integer
          example: 0
        ReplyMessage:
          type: string
          example: Success
        data:
          type: array
          items:
            type: object
            properties:
              Status:
                type: string
                example: Normal
              EmpId:
                type: string
                example: SK99000
              Name:
                type: string
                example: Mohamed Mahad Farah

    ErrorResponse:
      type: object
      properties:
        ResultCode:
          type: integer
          example: 1
        Language:
          type: integer
          example: 0
        ReplyMessage:
          type: string
          example: Invalid request

  responses:

    BadRequest:
      description: Invalid input
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"

    Unauthorized:
      description: Missing or invalid API key
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"

    NotFound:
      description: Resource not found
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"

    RateLimited:
      description: Too many requests
      headers:
        Retry-After:
          schema:
            type: integer
      content:
        application/json:
          schema:
            $ref: "#/compone
